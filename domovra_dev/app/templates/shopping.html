{% extends "base.html" %}
.stack { display: grid; gap: .5rem; }
.row { display: grid; grid-template-columns: 1fr 1fr; gap: .5rem; }
.add-line { display: grid; grid-template-columns: 2fr 1fr .8fr .8fr auto; gap: .5rem; }


/* Tables desktop */
.table { width: 100%; border-collapse: collapse; background: var(--card-bg, #fff); border: 1px solid #ddd; }
.table th, .table td { padding: .5rem .6rem; border-top: 1px solid #eee; vertical-align: middle; }
.table th { text-align: left; background: #fafafa; }
.table td.num, .table th.num { text-align: right; }
.table tr.checked .name .pname { text-decoration: line-through; opacity: .6; }
.table .pcat { font-size: .85em; color: #666; }
.table .note { color: #444; font-style: italic; }
.table td.check { width: 2rem; }
.table .actions { width: 1px; white-space: nowrap; }
.qty input[type=number] { width: 6ch; }


/* Cartes mobile */
.cards { display: grid; gap: .75rem; }
.card { border: 1px solid #e5e5e5; border-radius: .75rem; overflow: hidden; background: var(--card-bg, #fff); }
.card header { display: grid; grid-template-columns: auto 1fr auto; gap: .5rem; align-items: center; padding: .6rem
.7rem; background: #fafafa; }
.card .title { font-weight: 600; }
.card .subtitle { font-size: .85em; color: #666; }
.card .content { display: flex; align-items: center; gap: .5rem; padding: .6rem .7rem; }
.card .content .grow { flex: 1; display: inline-flex; align-items: center; gap: .5rem; }
.card.checked .title { text-decoration: line-through; opacity: .6; }


/* Dropdown minimal */
.dropdown { position: relative; }
.dropdown > summary { list-style: none; cursor: pointer; padding: .3rem .5rem; border-radius: .5rem; }
.dropdown.right > summary { justify-self: end; }
.dropdown .menu { position: absolute; z-index: 20; top: calc(100% + .25rem); left: 0; min-width: 260px; background:
#fff; border: 1px solid #e5e5e5; border-radius: .6rem; padding: .6rem; box-shadow: 0 10px 25px rgba(0,0,0,.08); }
.dropdown.right .menu { left: auto; right: 0; }
.dropdown[open] > summary { background: #f0f0f0; }


/* Chips / état */
.chip { display: inline-flex; align-items: center; gap: .4rem; padding: .25rem .5rem; border-radius: 999px; background:
#f6f6f6; border: 1px solid #e7e7e7; }
.chip.muted { opacity: .8; }


/* Divers */
button.danger { background: #ffe9e9; border: 1px solid #ffd0d0; }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0);
border: 0; }
.empty { opacity: .7; font-style: italic; margin-top: .5rem; }


/* Mode sombre léger (optionnel) */
@media (prefers-color-scheme: dark) {
.table, .card { background: #111; }
.table th { background: #161616; }
.table, .card, .dropdown .menu { border-color: #333; }
.table th, .table td { border-color: #222 !important; }
}


/* Responsive */
@media (max-width: 860px) {
.add-line { grid-template-columns: 1.6fr 1fr .8fr .8fr auto; }
}
@media (max-width: 700px) {
.only-desktop { display: none !important; }
.only-mobile { display: grid !important; }
.add-line { grid-template-columns: 1.4fr 1fr auto; }
.add-line input[name=qty_wanted], .add-line input[name=unit] { display: none; }
}
@media (min-width: 701px) {
.only-desktop { display: table !important; }
.only-mobile { display: none !important; }
}
</style>


<script>
  // Petite QoL : focus sur le champ d’ajout
  window.addEventListener('DOMContentLoaded', () => {
    const el = document.getElementById('add-name');
    if (el) el.focus();
  });
</script>
{% endblock %}